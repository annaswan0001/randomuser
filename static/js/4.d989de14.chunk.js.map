{"version":3,"sources":["views/Users/UserList/UserList.module.css","components/Input/Input.module.css","views/Users/UserLists.module.css","redux/actions/usersAction.jsx","views/Users/UserList/UserList.jsx","components/Input/Input.jsx","views/Users/Search/Search.jsx","views/Users/UsersLists.jsx"],"names":["module","exports","usersInit","users","dispatch","usersFetchStart","length","axios","get","then","res","usersFetchSuccsess","data","results","catch","err","usersFetchFail","type","actionsType","userFetchStart","userFetchSuccsess","user","UserList","props","classesArray","classes","Card","Transform","className","CardList","onClick","getDetailInfo","join","Face","src","picture","medium","alt","ContainText","name","first","last","id","value","Math","random","input","inputElement","elementtype","InputElement","ref","forwardedref","Input","Label","label","Search","useState","enteredFilter","setEnteredFilter","filterUsers","inputRef","useRef","useEffect","timer","setTimeout","current","clearTimeout","Fragment","style","color","fontWeight","htmlFor","onChange","e","preventDefault","target","placeholder","filterUser","createSelector","state","usersData","filter","toLowerCase","indexOf","connect","usersFilter","getUserInfo","userListRefresh","getState","console","log","isFetching","setIsFetching","history","useCallback","trim","handleScroll","window","innerHeight","document","documentElement","scrollTop","offsetHeight","addEventListener","removeEventListener","uuid","allUsers","login","push","ButtonRefresh","Button","CardListContainer","map","key"],"mappings":"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","file":"static/js/4.d989de14.chunk.js","sourcesContent":["// extracted by mini-css-extract-plugin\nmodule.exports = {\"CardList\":\"UserList_CardList__fUQ0U\",\"Cards\":\"UserList_Cards___Hjvo\",\"Card\":\"UserList_Card__1m2zX\",\"ContainText\":\"UserList_ContainText__3dPGJ\",\"Face\":\"UserList_Face__2kvS1\",\"Extra\":\"UserList_Extra__ilIv1\",\"Disappear\":\"UserList_Disappear__1FT7i\",\"Appear\":\"UserList_Appear__1CiuH\",\"appear\":\"UserList_appear__38hU3\",\"Transform\":\"UserList_Transform__1lHzo\",\"Transform-active\":\"UserList_Transform-active__3ktBG\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"Label\":\"Input_Label__2XMBp\",\"InputElement\":\"Input_InputElement__k202p\",\"mui-auto-fill-cancel\":\"Input_mui-auto-fill-cancel__PMone\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"CardList\":\"UserLists_CardList__MtK4o\",\"Search\":\"UserLists_Search__2OhnS\",\"CardListContainer\":\"UserLists_CardListContainer__15Zvi\",\"ButtonRefresh\":\"UserLists_ButtonRefresh__dq0jP\"};","import axios from \"axios\";\nimport * as actionsType from \"../actions/actionTypes\";\n\n//USERS\nexport const usersInit = (users) => (dispatch) => {\n  dispatch(usersFetchStart());\n  if (users.length < 100) {\n    axios\n      .get(\"https://randomuser.me/api/?results=50\")\n      //.get(\"https://randomuser.me/api/?results=50&inc=name,login,picture,id\")\n      .then((res) => {\n\n        dispatch(usersFetchSuccsess(res.data.results));\n       \n      })\n      .catch((err) => {\n        dispatch(usersFetchFail());\n      });\n  } else {\n    return;\n  }\n};\nexport const usersFetchStart = () => ({\n  type: actionsType.USERS_FETCH_START,\n});\nexport const usersFetchSuccsess = (users) => ({\n  type: actionsType.USERS_FETCH_SUCCESS,\n  users,\n});\nexport const usersFetchFail = () => ({\n  type: actionsType.USERS_FETCH_FAIL,\n});\n\n//Action provides users filtering\nexport const usersFilter = (filter) => ({\n  type: actionsType.USERS_FILTER,\n  filter,\n});\n\n//Action provides reset userList data\nexport const usersReset = () => ({\n  type: actionsType.USERS_RESET,\n});\n\n//Action provides refreth userList data\nexport const userListRefresh = () => (dispatch, getState) => {\n  dispatch(usersReset());\n  console.log(getState().users.usersData);\n  dispatch(usersInit(getState().users.usersData));\n};\n\n\n\n//USER\nexport const getUserInfo = (user) => (dispatch) => {\n  dispatch(userFetchStart());\n  if (user) {\n    dispatch(userFetchSuccsess(user));\n    // localStorage.setItem(\"user\", user)\n    // if randomUser had below setting - we could have been to get user data by uuid\n    // axios\n    //   .get(`https://randomuser.me/api?uuid=${userUuid}`)\n    //   .then((res) => {\n    //     console.log(res.data.results);\n    //     dispatch(userFetchSuccsess(res.data.results));\n    //   })\n    //   .catch((err) => {\n    //     dispatch(userFetchFail()); t\n    //   });\n  }\n};\n\nexport const userFetchStart = () => ({\n  type: actionsType.USER_FETCH_START,\n});\nexport const userFetchSuccsess = (user) => ({\n  type: actionsType.USER_FETCH_SUCCESS,\n  user,\n});\nexport const userFetchFail = () => ({\n  type: actionsType.USER_FETCH_FAIL,\n});\n\n\n","import React from \"react\";\nimport classes from \"./UserList.module.css\";\n\nexport default function UserList(props) {\n  const classesArray = [classes.Card, classes.Transform];\n  return (\n    <li className={classes.CardList} onClick={props.getDetailInfo}>\n      <div className={classesArray.join(\" \")}>\n        <div className={classes.Face}>\n          <img src={props.user.picture.medium} alt=\"user\" />\n        </div>\n        <div className={classes.ContainText}>\n          <h3>\n            HI! I am {props.user.name.first} {props.user.name.last}\n          </h3>\n          <p>\n            My id:\n            {props.user.id.value && props.user.id.value.length > 0\n              ? props.user.id.value\n              : Math.random()}\n          </p>\n        </div>\n      </div>\n    </li>\n  );\n}\n","import React from \"react\";\n\nimport classes from \"./Input.module.css\";\n\nconst input = (props) => {\n  let inputElement;\n  switch (props.elementtype) {\n    case \"input\":\n      inputElement = (\n        <input\n          className={classes.InputElement}\n          ref={props.forwardedref}\n          {...props}\n        />\n      );\n      break;\n    default: {\n      return inputElement; //we can add select /textareas and ect\n    }\n  }\n\n  return (\n    <div className={classes.Input}>\n      <label className={classes.Label}>{props.label}</label>\n      {inputElement}\n    </div>\n  );\n};\n\nexport default input;\n","import React, { useState, useRef, useEffect } from \"react\";\nimport Input from \"../../../components/Input/Input\";\n\nexport default function Search(props) {\n  const [enteredFilter, setEnteredFilter] = useState(\" \");\n\n  const { filterUsers } = props;\n\n    const inputRef = useRef(null);\n\n    useEffect(() => {\n      const timer = setTimeout(() => {\n        if (enteredFilter === inputRef.current.value) {\n          filterUsers(enteredFilter);\n        }\n      }, 1000);\n      return () => {\n        clearTimeout(timer);\n      };\n    }, [enteredFilter, inputRef, filterUsers]);\n\n  const changeInputValue = (e) => {\n    e.preventDefault();\n    setEnteredFilter(e.target.value);\n    \n  };\n\n  return (\n<React.Fragment>\n    <label style={{color:\"#1976d2\", fontWeight:\"900\"}} htmlFor=\"filter\"> Enter user name...</label>\n      <Input\n        elementtype =\"input\"\n        forwardedref={inputRef}\n        type=\"text\"\n        value={enteredFilter}\n        onChange={changeInputValue}\n        placeholder=\"First(last) name\"\n        name=\"filter\"\n      />\n</React.Fragment>\n  );\n}\n","import React, { useEffect, useState, useCallback } from \"react\";\nimport { connect } from \"react-redux\";\nimport {\n  usersInit,\n  usersFilter,\n  getUserInfo,\n  userListRefresh,\n} from \"../../redux/actions/usersAction\";\nimport UserList from \"./UserList/UserList\";\nimport Search from \"./Search/Search\";\nimport classes from \"./UserLists.module.css\";\nimport Button from \"../../components/Button/Button\";\nimport { createSelector } from 'reselect'\n\n//reselect for memo selectors\nconst getUsers = (state) => state.users.usersData\nconst getFilter = (state) => state.users.filter\n\nconst filterUser = createSelector(\n  [ getUsers, getFilter ],\n  (users, filter)=> {\n  if (users) {\n    if (!filter) {\n      return users;\n    } else {\n      const newUsers = users.filter((user) => {\n        const fullName =\n          user.name.first.toLowerCase() + \" \" + user.name.last.toLowerCase();\n        return fullName.indexOf(filter.toLowerCase()) >= 0;\n      });\n\n      return newUsers;\n    }\n  }\n}); // utils for correct filtering users from MapStateTpProps\n\nfunction Users(props) {\n  const [isFetching, setIsFetching] = useState(false); // for making infinite-scroll\n\n  const {\n    users,\n    usersInit,\n    usersFilter,\n    getUserInfo,\n    userListRefresh,\n    history,\n  } = props;\n\n  const filterUsers = useCallback(\n    (filter) => {\n      usersFilter(filter.trim());\n    },\n    [usersFilter]\n  );\n\n  const handleScroll = useCallback(() => {\n    if (\n      window.innerHeight + document.documentElement.scrollTop !==\n        document.documentElement.offsetHeight ||\n      isFetching\n    )\n      return;\n    setIsFetching(true);\n  }, [isFetching]); //add onScroll+ 50 users\n\n  useEffect(() => {\n    window.addEventListener(\"scroll\", handleScroll);\n    return () => window.removeEventListener(\"scroll\", handleScroll);\n  }, [handleScroll]);\n\n  useEffect(() => {\n    if (users.length === 0) {\n      usersInit(users);\n      setIsFetching(false);\n    }\n  }, [usersInit, setIsFetching]);\n\n  useEffect(() => {\n    if (isFetching) {\n      usersInit(users);\n      setIsFetching(false);\n    }\n  }, [isFetching, usersInit, users, setIsFetching]);\n\n  const getDetailInfo = useCallback(\n    (uuid, allUsers) => {\n      const user = allUsers.filter((user) => user.login.uuid === uuid);\n      getUserInfo(user);\n      history.push(`user/${uuid}`);\n    },\n    [ getUserInfo, history]\n  );\n\n  const handleDownload = () => {\n    userListRefresh();\n  };\n\n  return (\n    <div>\n      <div className={classes.Search}>\n        <Search filterUsers={filterUsers} />\n        <div className={classes.ButtonRefresh}>\n          <Button onClick={handleDownload}> Download new users</Button>\n        </div>\n      </div>\n      <div className={classes.CardListContainer}>\n        <ul className={classes.CardList}>\n          {props.users &&\n            props.users.map((user) => (\n              <UserList\n                getDetailInfo={() =>\n                  getDetailInfo(user.login.uuid, props.users)\n                }\n                key={user.login.uuid}\n                user={user}\n              />\n            ))}\n        </ul>\n      </div>\n    </div>\n  );\n}\n\nconst mapStateToProps = (state) => ({\n  users: filterUser(state),\n});\n\nexport default connect(mapStateToProps, {\n  usersInit,\n  usersFilter,\n  getUserInfo,\n  userListRefresh,\n})(Users);\n"],"sourceRoot":""}